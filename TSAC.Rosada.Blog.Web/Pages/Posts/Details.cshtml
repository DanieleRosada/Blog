@page "{id}"
@model TSAC.Rosada.Blog.Web.Pages.Posts.DetailsModel
@{
    ViewData["Title"] = "Details";
}

<h1>Detail</h1>
<div class="row">
    <div class="card col-md-12">
        @if (Model.Post.Image != null)
        {
            <img class="card-img-top" src=@Model.Post.Image alt="Card image cap">
        }
        <div class="card-body">
            <a asp-page="posts/details" asp-route-id="@Model.Post.Id">
                <h3>@Model.Post.Title</h3>
            </a>
            <p class="card-text">@Model.Post.Content</p>
            <p class="card-text"><small class="text-muted">Published date: @Model.Post.PublishedDate, User: @Model.Post.UserInsert</small></p>
        </div>
    </div>
</div>

<div class="row">
    <div class="comments col-md-offset-2 col-md-10" id="comments"></div>
</div>

<div class="form-horizontal">
    @if (Model.Consumer == null)
    {
        <div class="form-group">
            <label class="col-sm-2">User</label>
            <div class="col-sm-10">
                <input type="text" id="user" name="user" class="form-control" />
            </div>
        </div>
    }

    <div class="form-group">
        <label class="col-sm-2">Comment</label>
        <div class="col-sm-10">
            <textarea id="comment" name="comment" class="form-control"></textarea>
        </div>
    </div>

    <input type="hidden" id="userInput" value="@Model.Consumer" />
    <input type="hidden" id="id" value="@Model.Post.Id" />

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default" value="sendButton" name="sendButton" id="sendButton">SAVE</button>
        </div>
    </div>
</div>

<div class="IsWriting" id="IsWriting"></div>

@section Scripts {
    <script src="~/lib/signalr/dist/browser/signalr.min.js"></script>
    <script src="~/js/signalr_comments.js"></script>
}
